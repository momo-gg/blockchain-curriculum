# 5.7 User Experience & Transaction Friction

> *"Great crypto UX is mostly great error handling."*

---

## Why This Matters

Your product can be technically correct and still feel broken if users do not
understand what just happened. Solana transactions move fast, but the mental
model is unfamiliar, and small failures can look catastrophic. This module
helps you design flows that build trust when things go wrong.

---

## ðŸŸ¢ General Understanding

### Why Web3 Feels Harder Than Web2

Crypto replaces hidden infrastructure with explicit steps:
- You must hold a native token to pay fees
- Every action is a signed transaction
- Finality is fast but irreversible
- Many actions depend on multiple programs

Each extra step is a new point of failure, so good UX is mostly about making
those steps visible and predictable.

### Common Failure Reasons

| Symptom | Likely Cause | What It Means |
|---------|--------------|---------------|
| "Transaction failed" | Not enough SOL for fees or rent | Account cannot be created or updated |
| "Blockhash not found" | Transaction took too long to submit | The network rejected an old blockhash |
| "Slippage exceeded" | Price moved between quote and execution | Your limit price was too strict |
| "Account in use" | Parallel transactions touched the same account | Another tx locked the account first |
| "Simulation failed" | Instruction error inside program | On-chain logic rejected the request |

### "Pending" on Solana

Pending means the transaction was submitted but not yet confirmed. It is not
like a bank transfer. If confirmation does not arrive quickly, it is usually
because the transaction expired or never reached the leader, not because it is
slow.

### The Onboarding Friction Map

```
Install wallet â†’ Fund wallet â†’ First transaction â†’ First failure â†’ Trust lost?
```

Your job is to turn "first failure" into "first lesson."

---

## ðŸŸ¡ PM/EM Depth

### Product Principles for Trust

1. **Explain the cause** â€” "You need SOL for fees" beats "Transaction failed."
2. **Show next actions** â€” Provide a clear fix (fund, retry, adjust slippage).
3. **Separate user error vs network error** â€” Ownership changes behavior.
4. **Confirm intent** â€” Summarize what the user is signing in plain language.

### UX Response Playbook

| Situation | What the user needs | Product response |
|-----------|---------------------|------------------|
| Fee/rent error | "What am I missing?" | Show required SOL and why it is required |
| Slippage failure | "Was I scammed?" | Explain price movement and offer a slider |
| Congestion/timeout | "Is it stuck?" | Provide retry + status link to explorer |
| Simulation error | "Did I do something wrong?" | Human-readable error, not raw logs |

### Risk Communication

- **Approvals vs transfers:** Make it explicit when users grant permissions.
- **Irreversibility:** Remind users at the moment of action, not after.
- **Security anxiety:** Reduce it with clear, consistent transaction summaries.

---

## ðŸ”µ Engineer Depth

### Error Taxonomy to Log

Group errors so product can respond correctly:
- **Fee/rent errors** â€” insufficient SOL, account not rent-exempt
- **Blockhash errors** â€” blockhash not found, transaction expired
- **Instruction errors** â€” custom program error codes, constraint failures
- **RPC errors** â€” timeouts, transport errors, rate limits

Log these alongside:
`signature`, `wallet`, `rpc_endpoint`, `instruction_index`, `program_id`.

### Engineering Patterns that Reduce Friction

**Preflight simulation**
- Run simulation to catch instruction errors early
- Translate common errors into user messages

**Blockhash refresh**
- Refresh blockhash right before signing
- Retry with a new blockhash if submission fails

**Idempotent UX**
- Treat resubmissions safely
- Use client-side nonce or memo to dedupe

**Status state machine**
```
created â†’ signed â†’ submitted â†’ processed â†’ confirmed â†’ finalized
```
Use this to power consistent UI states and analytics.

---

## âœ… Check Your Understanding

- [ ] Why does Solana require a native token for transactions?
- [ ] What is the difference between a slippage error and a blockhash error?
- [ ] How would you explain "pending" to a new user?
- [ ] Which errors should be treated as network issues vs user issues?

---

## Key Takeaways

1. **Most UX pain is error ambiguity** â€” explain, do not just report
2. **Fees and rent are the top surprise** â€” surface them early
3. **Pending is not processing** â€” communicate finality clearly
4. **Simulations are UX tools** â€” use them for clarity
5. **Trust grows from predictability** â€” consistent status states matter

---

## Next

Part 6 moves into production infrastructure and operations.

â†’ [Part 6: Infrastructure & Advanced](../part-6-infrastructure/6.1-rpc-providers.md)
