# 6.7 Oracles & Data Feeds

> *"Your on-chain logic is only as trustworthy as its data."*

---

## Why This Matters

Most production Solana apps depend on off-chain information: prices, events,
identity signals, or randomness. Oracles deliver that data to on-chain programs.
If the data is wrong, delayed, or missing, your protocol can fail even when
the rest of your stack is secure.

---

## ðŸŸ¢ General Understanding

### The Oracle Problem

Blockchains cannot fetch external data by themselves. Oracles are the bridges
that bring off-chain information on-chain so programs can use it safely.

### What Oracles Provide

- **Prices** for swaps, lending, and liquidations
- **Events** for prediction markets or settlement conditions
- **Randomness** for games, lotteries, or fair selection
- **Real-world signals** like weather, sports, or IoT data

### Common Oracle Models

| Model | Description | Risk Profile |
|-------|-------------|--------------|
| Centralized | Single source publishes data | Simple, but single point of failure |
| Decentralized | Multiple sources aggregate data | More resilient, more complex |
| Optimistic | Data is assumed correct unless disputed | Fast, but relies on dispute process |

### Solana Oracle Landscape

Solana apps typically use dedicated oracle networks (for example, Pyth or
Switchboard) or operate custom feeds for narrow use cases.

> âš ï¸ **Data Disclaimer**: Oracle providers and feed details change frequently.
> Always verify current feed IDs, update cadence, and trust models in official
> docs before shipping to production.

---

## ðŸŸ¡ PM/EM Depth

### Product and Risk Questions to Ask

- **What happens if the oracle is wrong?** Identify blast radius by feature.
- **What is your fallback plan?** Freeze markets, widen limits, or pause actions.
- **Who owns the relationship?** Vendor management and incident response should
  have clear owners.
- **How will you communicate outages?** User trust depends on transparency.

### Procurement Checklist

1. **Data source integrity** â€” Where does the data come from?
2. **Update cadence** â€” How frequently is data refreshed?
3. **Incident history** â€” How have outages been handled in the past?
4. **Cost model** â€” Subscription vs per-request pricing
5. **Coverage** â€” Do you need niche assets or only majors?

---

## ðŸ”µ Engineer Depth

### On-Chain Safety Checks

Treat oracle data as untrusted input:
- Verify **staleness** and reject data past a threshold
- Use **confidence intervals** or price bands where available
- Compare **multiple feeds** for critical actions
- Prefer **TWAPs** for liquidation thresholds instead of spot prices

### Integration Patterns

**Explicit validation**
- Check owner program and account discriminator
- Validate feed metadata and publishing authority

**Graceful degradation**
- If the oracle is stale, reject trades or freeze positions
- Log a clear, parseable error for client UX

**Monitoring**
- Alert on stale feeds, sudden price jumps, or missing updates
- Keep a human-readable dashboard for operations teams

---

## âœ… Check Your Understanding

- [ ] Why canâ€™t Solana programs read external APIs directly?
- [ ] What is the difference between centralized and decentralized oracles?
- [ ] How should you handle stale oracle data in production?
- [ ] What data signals would you monitor for oracle health?

---

## Key Takeaways

1. **Oracles are critical infrastructure** â€” treat them like production dependencies
2. **Staleness and manipulation are the main risks** â€” design guardrails
3. **Fallback behavior must be defined** â€” do not improvise in incidents
4. **Monitoring is mandatory** â€” detect feed issues before users do
5. **Validate feeds on-chain** â€” never trust unverified inputs

---

## Next: Appendices

â†’ [Appendix A: Glossary](../appendices/appendix-a-glossary.md)
