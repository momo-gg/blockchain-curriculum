---
title: "3.4 Validators & Network Architecture"
description: "Learn about 3.4 Validators & Network Architecture in the Solana onboarding curriculum."
---

---

## Why This Matters

Understanding validators helps you:
- Choose where to stake (affects your rewards and the network's health)
- Understand why the network behaves the way it does
- Evaluate Solana's decentralization claims
- Make informed decisions as a builder or investor

> âš ï¸ **Data Disclaimer**: Validator counts and stake distributions change frequently â€” check [Solana Beach Validators](https://solanabeach.io/validators) or [Validators.app](https://www.validators.app/) for current data (as of those sources).

---

## ðŸŸ¢ General Understanding

### What Is a Validator?

A validator is a computer (actually, a powerful server) that:
- Stores a copy of the blockchain
- Validates transactions
- Votes on which blocks are correct
- Sometimes produces new blocks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Validator Node                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚   Network   â”‚    â”‚  Consensus  â”‚    â”‚  Execution  â”‚        â”‚
â”‚   â”‚   Module    â”‚    â”‚   Engine    â”‚    â”‚   Runtime   â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â†“                  â†“                  â†“                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚              Accounts Database (Cloudbreak)          â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                  â”‚
â”‚   CPU: 12+ cores | RAM: 256+ GB | Storage: 1+ TB NVMe         â”‚
â”‚   Network: 1+ Gbps (10 Gbps preferred)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Hardware guidance is based on Anza validator requirements (as of [docs.anza.xyz](https://docs.anza.xyz/operations/requirements)).

### How Leaders Are Chosen

Not every validator produces blocks. The network uses a **leader schedule**:

**Stake-Weighted Random Selection**

```
More stake â†’ more leader slots (proportional)
Less stake â†’ fewer leader slots
```

The schedule is:
- Determined at the start of each epoch (epoch length ~2 days; as of `solana-labs/solana` clock constants)
- Publicly known in advance
- Pseudo-random but weighted by stake

**Why This Works**

```
More stake = More leader slots = More responsibility

But also:
More stake = More rewards
More stake = More reputation and future rewards at risk

Alignment: High-stake validators are incentivized to be reliable
```

### Does Speed Fluctuate by Leader?

**Yes, somewhat.**

Different validators have different:
- Hardware (faster CPUs process more transactions)
- Network connections (better bandwidth = faster propagation)
- Geographic location (closer to other validators = lower latency)
- Software optimization (some run Jito, others don't)

```
Leader Slot Performance Variation:

Higher-performance validator:
  - Processes more transactions per slot
  - Produces fewer skipped slots

Lower-performance validator:
  - Processes fewer transactions per slot
  - Skips slots more often
```

**What Users Experience**

Usually you don't notice because:
- Leaders change each slot (slot target ~400ms; as of `solana-labs/solana` clock constants)
- Bad leaders are rare (they lose stake)
- Transactions retry automatically

But during congestion:
- Good leaders process more transactions
- Bad leaders may skip slots
- Your transaction timing matters

**Example: Congested Swap**
```
User submits swap during a busy slot
  â†’ Leader skips the slot
  â†’ Wallet shows "pending" a bit longer
  â†’ Next leader picks it up and confirms
```

### Validator Count and Decentralization

**Current State**

See current validator count, stake concentration, and Nakamoto coefficient on [Validators.app](https://www.validators.app/) or [Solana Beach](https://solanabeach.io/validators) (as of those sources).

**What These Mean**

- **Superminority**: The smallest set that controls >33% of stake (can halt network)
- **Nakamoto coefficient**: How many entities must collude to attack

**Comparison**

| Blockchain | Node Count | Nakamoto Coefficient |
|------------|------------|---------------------|
| Solana | See current sources | See current sources |
| Ethereum | Not verified in this pass | Not verified in this pass |
| Bitcoin | Not verified in this pass | Not verified in this pass |

> ðŸ’¡ **Key Insight**: Node count isn't everything. Stake distribution matters more (as of current stake concentration data sources).

> âœ… **Check Your Understanding**
> - [ ] How is the leader schedule determined?
> - [ ] Why do validators with more stake get more leader slots?
> - [ ] What's the "Nakamoto coefficient"?
> - [ ] Does leader selection affect transaction speed?

---

## ðŸŸ¡ PM/EM Depth

### The Economics of Running a Validator

Running a validator is a business. Costs vary widely by hosting, hardware, and operational setup.

**Capital Requirements**

| Item | Guidance |
|------|----------|
| Server hardware | See Anza requirements |
| Staked SOL | Technically optional, but delegation helps |
| Vote account reserve | Ongoing voting fees apply |
| Initial setup | Varies by provider and automation |

**Operating Costs (Annual)**

| Category | Notes |
|----------|------|
| Colocation/hosting | Pricing varies by region and SLA |
| Bandwidth | Depends on traffic and provider |
| Hardware refresh | Depreciation and upgrades |
| Monitoring/ops | Staff time + tooling |
| Vote transaction fees | Variable with network conditions |

**Revenue Sources**

```
Inflation Rewards:
  - Protocol-defined inflation schedule (see Solana docs)
  - Your share: Based on your % of total stake

Transaction Fees:
  - Fees are split between burning and the leader
  - Actual amounts vary with network usage

MEV (via Jito):
  - Depends on leader slots and market conditions
  - Requires running a compatible client

Commission:
  - Validators set their own commission rate
  - Higher commission = lower staker APY
```

**Break-Even Analysis**

Break-even depends on operating costs, commission, and network rewards. Use your actual costs and current staking parameters to model profitability (as of [docs.solanalabs.com/consensus/stake-delegation-and-rewards](https://docs.solanalabs.com/consensus/stake-delegation-and-rewards)).

### How New Validators Join

**Technical Steps**

```
1. HARDWARE SETUP
   - Provision server meeting specs
   - Install Ubuntu 24.04 (as of [docs.anza.xyz/operations/requirements](https://docs.anza.xyz/operations/requirements))
   - Configure network, firewall, NTP

2. SOFTWARE INSTALLATION
   - Install Solana CLI tools
   - Download/build Agave client
   - Configure validator settings

3. IDENTITY CREATION
   - Generate validator identity keypair
   - Create vote account
   - Create authorized withdrawer

4. INITIAL SYNC
   - Download snapshot from existing validator
   - Catch up to current slot
   - Begin voting (timing varies by network conditions)

5. STAKE ACTIVATION
   - Self-stake or attract delegators
   - Wait for stake to warm up (warmup is epoch-based; as of [docs.solanalabs.com/consensus/stake-delegation-and-rewards](https://docs.solanalabs.com/consensus/stake-delegation-and-rewards))
   - Begin earning rewards
```



### Governance: SIMDs and Voting

**Solana Improvement Documents (SIMDs)**

```
SIMD Lifecycle:
  Draft â†’ Review â†’ Last Call â†’ Accepted/Rejected â†’ Implemented â†’ Activated
```

See the SIMD index for current proposals and their status (as of [docs.solanalabs.com/proposals](https://docs.solanalabs.com/proposals)).

**How Decisions Are Made**

| Type | Decision Maker | Process |
|------|----------------|---------|
| Protocol changes | Core contributors + validators | SIMD + implementation + activation |
| Feature activation | Validators (stake-weighted) | Run upgraded software |
| Grant allocation | Foundation | Committee review |
| Client development | Anza/Jump teams | Internal prioritization |

**Validator Governance Power**

Validators can:
- Choose which features to activate (by running upgraded software)
- Block changes they disagree with (by not upgrading)
- Signal preferences through voting

They cannot:
- Unilaterally change protocol rules
- Override community consensus
- Force other validators to follow

### Multiple Clients: Agave and Firedancer

**Why Multiple Clients?**

```
Single client risk:
  Bug in code â†’ Network halts
  Bug affects everyone

Multiple clients:
  Bug in Agave â†’ Firedancer validators keep running
  Network continues (reduced capacity)
  Bug is isolated and fixed
```

**Client Comparison**

| Aspect | Agave (Anza) | Firedancer (Jump) |
|--------|--------------|-------------------|
| Language | Rust | C |
| Team | Anza (ex-Solana Labs) | Jump Crypto |
| Status | Mainnet | In development |
| Philosophy | Stability-focused | Performance-focused |
| Codebase | Evolution of original | Independent implementation |

Status and language details are based on Anza and Jump documentation (as of [docs.anza.xyz](https://docs.anza.xyz/) and [jumpcrypto.com/firedancer](https://jumpcrypto.com/firedancer)).

> âœ… **Check Your Understanding**
> - [ ] What are the main costs of running a validator?
> - [ ] How do validators earn revenue?
> - [ ] What's the SIMD process?
> - [ ] Why are multiple validator clients valuable?

---

## ðŸ”µ Engineer Depth

### Vote Transactions

Every slot, validators submit vote transactions:

```rust
pub struct Vote {
    /// Slot numbers being voted for (most recent last)
    pub slots: Vec<Slot>,

    /// Hash of the block at the last slot
    pub hash: Hash,

    /// Timestamp of vote (optional, only from leader)
    pub timestamp: Option<UnixTimestamp>,
}
```

**Vote Account Structure**

```rust
pub struct VoteState {
    pub node_pubkey: Pubkey,           // Validator identity
    pub authorized_voter: Pubkey,       // Who can submit votes
    pub authorized_withdrawer: Pubkey,  // Who can withdraw rewards
    pub votes: VecDeque<Lockout>,       // Recent votes with lockouts
    pub root_slot: Option<Slot>,        // Last rooted slot
    pub commission: u8,                 // 0-100%
    pub epoch_credits: Vec<(Epoch, u64, u64)>, // Rewards earned
    // ... more fields
}
```

**Vote Transaction Flow**

```
Leader produces block for slot N
    â†“
Validator verifies block
    â†“
Validator creates vote transaction:
  - Votes for slot N
  - References previous votes
  - Signs with vote authority
    â†“
Vote transaction submitted to current leader
    â†“
Vote included in upcoming block
    â†“
Other validators see vote
    â†“
Consensus progresses
```

### Tower BFT Implementation

**Vote Lockout Logic**

```rust
// Simplified lockout calculation
fn calculate_lockout(vote_history: &[Vote]) -> u64 {
    let mut lockout = 1;
    for (i, _) in vote_history.iter().enumerate().rev() {
        lockout *= 2;  // Exponential increase
        if lockout >= MAX_LOCKOUT {
            break;
        }
    }
    lockout
}

// Validator can only vote for conflicting fork after lockout expires
fn can_vote_for_fork(&self, slot: Slot) -> bool {
    for vote in &self.votes {
        if slot < vote.slot + vote.lockout {
            return false;
        }
    }
    true
}
```

**Optimistic Confirmation**

```
A block is "confirmed" when:
  - 66%+ of stake has voted on it (directly or by descendants)

A block is "finalized" when:
  - 31+ confirmed blocks are built atop it

These definitions follow Solana commitment status terminology (as of [docs.solanalabs.com/consensus/commitments](https://docs.solanalabs.com/consensus/commitments)).
```

### Leader Schedule Generation

The leader schedule is deterministic given epoch and stake:

```rust
pub fn leader_schedule_for_epoch(
    epoch: Epoch,
    stakes: &HashMap<Pubkey, u64>,
    config: &ScheduleConfig,
) -> LeaderSchedule {
    let total_stake: u64 = stakes.values().sum();
    let slots_per_epoch = config.slots_per_epoch;

    // Seed RNG with epoch for determinism
    let mut rng = ChaChaRng::seed_from_u64(epoch);

    let mut schedule = vec![];

    for _ in 0..slots_per_epoch {
        // Weighted random selection
        let target = rng.gen_range(0..total_stake);
        let mut cumulative = 0;

        for (pubkey, stake) in stakes {
            cumulative += stake;
            if cumulative > target {
                schedule.push(*pubkey);
                break;
            }
        }
    }

    LeaderSchedule::new(schedule)
}
```

**Schedule Properties**
- Same inputs â†’ same schedule (any node can compute)
- Proportional to stake
- Random within epoch (not predictable before epoch starts)
- Known at epoch start (not during epoch)

### Stake Warming and Cooling

Stake changes aren't instant:

```
Epoch N: You stake 1000 SOL
  â†’ Stake is "activating"
  â†’ Not counted for leader schedule
  â†’ Not earning rewards

Epoch N+1: Stake is "active"
  â†’ Counted for leader schedule
  â†’ Earning rewards

...

Epoch M: You unstake
  â†’ Stake is "deactivating"
  â†’ Still earning (but declining proportionally)

Epoch M+1: Stake is "inactive"
  â†’ Can be withdrawn
```

**Why Warming/Cooling Exist**

- Prevents stake-flash attacks (stake, vote, unstake)
- Allows network to adjust to stake changes
- Gives other validators time to react

### Validator Monitoring

Key metrics to monitor (set thresholds based on your own SLOs):

```yaml
Performance:
  - slot_processing_time_ms
  - vote_latency_ms
  - skip_rate
  - delinquency

Resources:
  - cpu_usage
  - memory_usage
  - disk_io_wait
  - network_bandwidth

Consensus:
  - last_vote_slot
  - root_slot
  - vote_credits_epoch

Financial:
  - vote_account_balance
  - identity_balance
```

**Skip Rate Impact**

```
Skip rate = slots where you were leader but produced no block

Causes:
  - Hardware failure
  - Network partition
  - Software bug
  - Overloaded system

Impact:
  - Lost block rewards for that slot
  - Reputation damage
  - Potential stake loss (stakers leave)
```

### Jito Integration

Some validators opt into Jito for additional MEV-related revenue (as of [jito.wtf](https://www.jito.wtf/)):

```
Standard Validator:
  Transaction â†’ Leader â†’ Block
  Revenue: Base fees + inflation rewards

Jito Validator:
  Transaction â†’ Jito Bundles â†’ Searcher tips â†’ Leader â†’ Block
  Revenue: Base fees + inflation rewards + MEV tips

Jito Block Engine:
  - Searchers submit bundles (groups of transactions)
  - Bundles include tips to validators
  - Validators commit to including bundles atomically
  - Tips distributed to validators and stakers
```

**MEV Distribution**

```
Tip distribution and validator sharing policies vary by operator and stake pool.
```

> âœ… **Check Your Understanding**
> - [ ] What's in a vote transaction?
> - [ ] How is the leader schedule generated?
> - [ ] Why do stake changes take an epoch to activate?
> - [ ] What metrics indicate validator health?
> - [ ] How does Jito increase validator revenue?

---

## Key Takeaways

1. **Validators are businesses** â€” significant capital and operating costs
2. **Leaders are chosen by stake** â€” more stake = more slots = more responsibility
3. **Performance varies by leader** â€” but bad leaders lose stakers
4. **Multiple clients improve resilience** â€” Agave and Firedancer
5. **Governance is informal but functional** â€” SIMDs, stake-weighted activation
6. **Staking has warmup/cooldown** â€” prevents gaming
7. **MEV tooling is optional** â€” some validators run Jito for additional revenue

---
